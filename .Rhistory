temp_name = paste(toupper(substr(foutcome_name[1],1,1)), substr(foutcome_name[[1]],2, nchar(foutcome_name[[1]])), sep ='')
temp_name = paste(temp_name, paste(toupper(substr(foutcome_name[[2]],1,1)), substr(foutcome_name[[2]],2,nchar(foutcome_name[[2]])), sep = ''), sep = ".")
outcome_name = temp_name
}
outcome_name = "heart failure"
x <- outcome_name
foutcome_name <- strsplit(outcome_name, " ")[[1]]
if(length(strsplit(foutsome_name, " ")[[1]]) > 1){
temp_name = paste(toupper(substr(foutcome_name[1],1,1)), substr(foutcome_name[[1]],2, nchar(foutcome_name[[1]])), sep ='')
temp_name = paste(temp_name, paste(toupper(substr(foutcome_name[[2]],1,1)), substr(foutcome_name[[2]],2,nchar(foutcome_name[[2]])), sep = ''), sep = ".")
outcome_name = temp_name
}
if(length(strsplit(foutcome_name, " ")[[1]]) > 1){
temp_name <- paste(toupper(substr(foutcome_name[1],1,1)), substr(foutcome_name[[1]],2, nchar(foutcome_name[[1]])), sep ='')
temp_name <- paste(temp_name, paste(toupper(substr(foutcome_name[[2]],1,1)), substr(foutcome_name[[2]],2,nchar(foutcome_name[[2]])), sep = ''), sep = ".")
outcome_name <- temp_name
}
foutcome_name <- strsplit(outcome_name, " ")[[1]]
if(length(strsplit(foutcome_name, " ")[[1]]) > 1){
temp_name <- paste(toupper(substr(foutcome_name[1],1,1)), substr(foutcome_name[[1]],2, nchar(foutcome_name[[1]])), sep ='')
temp_name <- paste(temp_name, paste(toupper(substr(foutcome_name[[2]],1,1)), substr(foutcome_name[[2]],2,nchar(foutcome_name[[2]])), sep = ''), sep = ".")
outcome_name <- temp_name
}
length(strsplit(foutcome_name, " ")[[1]]) > 1
length(strsplit(foutcome_name, " ")[1]) > 1
length(strsplit(foutcome_name, " ")) > 1
if(length(strsplit(foutcome_name, " ")) > 1){
temp_name <- paste(toupper(substr(foutcome_name[1],1,1)), substr(foutcome_name[[1]],2, nchar(foutcome_name[[1]])), sep ='')
temp_name <- paste(temp_name, paste(toupper(substr(foutcome_name[[2]],1,1)), substr(foutcome_name[[2]],2,nchar(foutcome_name[[2]])), sep = ''), sep = ".")
outcome_name <- temp_name
}
outcome_name <- "pneumonia"
foutcome_name <- strsplit(outcome_name, " ")[[1]]
if(length(strsplit(foutcome_name, " ")) > 1){
temp_name <- paste(toupper(substr(foutcome_name[1],1,1)), substr(foutcome_name[[1]],2, nchar(foutcome_name[[1]])), sep ='')
temp_name <- paste(temp_name, paste(toupper(substr(foutcome_name[[2]],1,1)), substr(foutcome_name[[2]],2,nchar(foutcome_name[[2]])), sep = ''), sep = ".")
outcome_name <- temp_name
}else if (length(strsplit(foutcome_name, " ")) == 1){
outcome_name = paste(toupper(substr(foutcome_name[1],1,1)), substr(foutcome_name[[1]],2, nchar(foutcome_name[[1]])), sep ='')
}
x <- paste("Hospital.30.Day.Death..Mortality..Rates.from.", outcome_name, sep = '')
sub_outcome <- outcome[outcome$State == state,]
sub_outcome <-sub_outcome[as.numeric(as.character(sub_outcome[[x]])),]
sub_outcome <-sub_outcome[!is.na(sub_outcome[[x]]),]
min_death <- min(sub_outcome$x)
min_death <- min(sub_outcome[[x]])
View(sub_outcome)
as.numeric(sub_outcome[[x]])
sub_outcome <-sub_outcome[!is.na(sub_outcome[[x]]),]
min_death <- min(sub_outcome[[x]])
print(state)
sub_outcome[[x]] <- as.numeric(sub_outcome[[x]])
min_death <- min(sub_outcome[[x]])
sub_outcome <-sub_outcome[outcome[[x]] == min_death]
View(sub_outcome)
x <- paste("Hospital.30.Day.Death..Mortality..Rates.from.", outcome_name, sep = '')
sub_outcome <- outcome[outcome$State == state,]
sub_outcome <-sub_outcome[as.numeric(as.character(sub_outcome[[x]])),]
sub_outcome <-sub_outcome[!is.na(sub_outcome[[x]]),]
sub_outcome[[x]] <- as.numeric(sub_outcome[[x]])
min_death <- min(sub_outcome[[x]])
sub_outcome
View(sub_outcome)
sub_outcome <-sub_outcome[outcome[[x]] == min_death,]
View(sub_outcome)
x <- paste("Hospital.30.Day.Death..Mortality..Rates.from.", outcome_name, sep = '')
sub_outcome <- outcome[outcome$State == state,]
sub_outcome <-sub_outcome[as.numeric(as.character(sub_outcome[[x]])),]
sub_outcome <-sub_outcome[!is.na(sub_outcome[[x]]),]
sub_outcome[[x]] <- as.numeric(sub_outcome[[x]])
min_death <- min(sub_outcome[[x]])
x
sub_outcome <-sub_outcome[sub_outcome[[x]] == min_death,]
View(sub_outcome)
sub_outcome <- unique.data.frame(sub_outcome)
View(sub_outcome)
View(sub_outcome)
x <- paste("Hospital.30.Day.Death..Mortality..Rates.from.", outcome_name, sep = '')
sub_outcome <- outcome[outcome$State == state,]
sub_outcome <- unique.data.frame(sub_outcome)
sub_outcome <-sub_outcome[as.numeric(as.character(sub_outcome[[x]])),]
sub_outcome <-sub_outcome[!is.na(sub_outcome[[x]]),]
sub_outcome[[x]] <- as.numeric(sub_outcome[[x]])
min_death <- min(sub_outcome[[x]])
sub_outcome <-sub_outcome[sub_outcome[[x]] == min_death,]
sub_outcome <- unique.data.frame(sub_outcome)
x <- paste("Hospital.30.Day.Death..Mortality..Rates.from.", outcome_name, sep = '')
sub_outcome <- outcome[outcome$State == state,]
sub_outcome <-sub_outcome[as.numeric(as.character(sub_outcome[[x]])),]
sub_outcome <-sub_outcome[!is.na(sub_outcome[[x]]),]
sub_outcome[[x]] <- as.numeric(sub_outcome[[x]])
min_death <- min(sub_outcome[[x]])
sub_outcome <-sub_outcome[sub_outcome[[x]] == min_death,]
sub_outcome <- unique.data.frame(sub_outcome)
if(nrow(sub_outcome) == 1){
sub_outcome$Hospital.Name
}
sub_outcome$Hospital.Name[1]
sub_outcome$Hospital.Name[[1]]
if(nrow(sub_outcome) == 1){
sub_outcome$Hospital.Name[[1]]
}
sub_outcome[[1]]$Hospital.Name
sub_outcome[1]$Hospital.Name
if(nrow(sub_outcome) == 1){
sub_outcome[1]$Hospital.Name
}
sub_outcome[1]$Hospital.Name
sub_outcome[1]$Hospital.Name
sub_outcome$Hospital.Name[1]
best <-function(state, outcome_name){
outcome <- read.csv("outcome-of-care-measures.csv")
outcome_types <- c('heart attack', 'heart failure', 'pneumonia')
if(!state %in% state.abb){
stop("invalid state")
}
if(!outcome_name %in% outcome_types){
stop("invalid outcome")
}
foutcome_name <- strsplit(outcome_name, " ")[[1]]
if(length(strsplit(foutcome_name, " ")) > 1){
temp_name <- paste(toupper(substr(foutcome_name[1],1,1)), substr(foutcome_name[[1]],2, nchar(foutcome_name[[1]])), sep ='')
temp_name <- paste(temp_name, paste(toupper(substr(foutcome_name[[2]],1,1)), substr(foutcome_name[[2]],2,nchar(foutcome_name[[2]])), sep = ''), sep = ".")
outcome_name <- temp_name
}else if (length(strsplit(foutcome_name, " ")) == 1){
outcome_name = paste(toupper(substr(foutcome_name[1],1,1)), substr(foutcome_name[[1]],2, nchar(foutcome_name[[1]])), sep ='')
}
x <- paste("Hospital.30.Day.Death..Mortality..Rates.from.", outcome_name, sep = '')
sub_outcome <- outcome[outcome$State == state,]
sub_outcome <-sub_outcome[as.numeric(as.character(sub_outcome[[x]])),]
sub_outcome <-sub_outcome[!is.na(sub_outcome[[x]]),]
sub_outcome[[x]] <- as.numeric(sub_outcome[[x]])
min_death <- min(sub_outcome[[x]])
sub_outcome <-sub_outcome[sub_outcome[[x]] == min_death,]
sub_outcome <- unique.data.frame(sub_outcome)
if(nrow(sub_outcome) == 1){
sub_outcome[1]$Hospital.Name
}
}
best("TX", "heart attack")
state <- "TX"
best("MI", "pneumonia")
x <- paste("Hospital.30.Day.Death..Mortality..Rates.from.", outcome_name, sep = '')
sub_outcome <- outcome[outcome$State == state,]
sub_outcome <-sub_outcome[as.numeric(as.character(sub_outcome[[x]])),]
sub_outcome <-sub_outcome[!is.na(sub_outcome[[x]]),]
sub_outcome[[x]] <- as.numeric(sub_outcome[[x]])
min_death <- min(sub_outcome[[x]])
sub_outcome <-sub_outcome[sub_outcome[[x]] == min_death,]
sub_outcome <- unique.data.frame(sub_outcome)
if(nrow(sub_outcome) == 1){
sub_outcome[1]$Hospital.Name
}
as.character(sub_outcome$Hospital.Name[[1]])
if(nrow(sub_outcome) == 1){
as.character(sub_outcome$Hospital.Name[[1]])
}
best <-function(state, outcome_name){
outcome <- read.csv("outcome-of-care-measures.csv")
outcome_types <- c('heart attack', 'heart failure', 'pneumonia')
if(!state %in% state.abb){
stop("invalid state")
}
if(!outcome_name %in% outcome_types){
stop("invalid outcome")
}
foutcome_name <- strsplit(outcome_name, " ")[[1]]
if(length(strsplit(foutcome_name, " ")) > 1){
temp_name <- paste(toupper(substr(foutcome_name[1],1,1)), substr(foutcome_name[[1]],2, nchar(foutcome_name[[1]])), sep ='')
temp_name <- paste(temp_name, paste(toupper(substr(foutcome_name[[2]],1,1)), substr(foutcome_name[[2]],2,nchar(foutcome_name[[2]])), sep = ''), sep = ".")
outcome_name <- temp_name
}else if (length(strsplit(foutcome_name, " ")) == 1){
outcome_name = paste(toupper(substr(foutcome_name[1],1,1)), substr(foutcome_name[[1]],2, nchar(foutcome_name[[1]])), sep ='')
}
x <- paste("Hospital.30.Day.Death..Mortality..Rates.from.", outcome_name, sep = '')
sub_outcome <- outcome[outcome$State == state,]
sub_outcome <-sub_outcome[as.numeric(as.character(sub_outcome[[x]])),]
sub_outcome <-sub_outcome[!is.na(sub_outcome[[x]]),]
sub_outcome[[x]] <- as.numeric(sub_outcome[[x]])
min_death <- min(sub_outcome[[x]])
sub_outcome <-sub_outcome[sub_outcome[[x]] == min_death,]
sub_outcome <- unique.data.frame(sub_outcome)
if(nrow(sub_outcome) == 1){
as.character(sub_outcome$Hospital.Name[[1]])
}
}
best("MI", "pneumonia")
best("TX", "heart attack")
state <- "TX"
outcome_name <- "heart attack"
outcome <- read.csv("outcome-of-care-measures.csv")
outcome_types <- c('heart attack', 'heart failure', 'pneumonia')
if(!state %in% state.abb){
stop("invalid state")
}
if(!outcome_name %in% outcome_types){
stop("invalid outcome")
}
foutcome_name <- strsplit(outcome_name, " ")[[1]]
if(length(strsplit(foutcome_name, " ")) > 1){
temp_name <- paste(toupper(substr(foutcome_name[1],1,1)), substr(foutcome_name[[1]],2, nchar(foutcome_name[[1]])), sep ='')
temp_name <- paste(temp_name, paste(toupper(substr(foutcome_name[[2]],1,1)), substr(foutcome_name[[2]],2,nchar(foutcome_name[[2]])), sep = ''), sep = ".")
outcome_name <- temp_name
}else if (length(strsplit(foutcome_name, " ")) == 1){
outcome_name = paste(toupper(substr(foutcome_name[1],1,1)), substr(foutcome_name[[1]],2, nchar(foutcome_name[[1]])), sep ='')
}
x <- paste("Hospital.30.Day.Death..Mortality..Rates.from.", outcome_name, sep = '')
sub_outcome <- outcome[outcome$State == state,]
sub_outcome <-sub_outcome[as.numeric(as.character(sub_outcome[[x]])),]
sub_outcome <-sub_outcome[!is.na(sub_outcome[[x]]),]
sub_outcome[[x]] <- as.numeric(sub_outcome[[x]])
min_death <- min(sub_outcome[[x]])
sub_outcome <-sub_outcome[sub_outcome[[x]] == min_death,]
sub_outcome <- unique.data.frame(sub_outcome)
if(nrow(sub_outcome) == 1){
as.character(sub_outcome$Hospital.Name[[1]])
}
sub_outcome <-sub_outcome[as.numeric(as.character(sub_outcome[[x]])),]
sub_outcome <-sub_outcome[!is.na(sub_outcome[[x]]),]
sub_outcome[[x]] <- as.numeric(sub_outcome[[x]])
min_death <- min(sub_outcome[[x]])
x <- paste("Hospital.30.Day.Death..Mortality..Rates.from.", outcome_name, sep = '')
sub_outcome <- outcome[outcome$State == state,]
sub_outcome <-sub_outcome[as.numeric(as.character(sub_outcome[[x]])),]
sub_outcome <-sub_outcome[!is.na(sub_outcome[[x]]),]
sub_outcome[[x]] <- as.numeric(sub_outcome[[x]])
min_death <- min(sub_outcome[[x]])
sub_outcome <- unique.data.frame(sub_outcome)
View(sub_outcome)
sub_outcome <- outcome[outcome$State == state,]
sub_outcome <-sub_outcome[as.numeric(as.character(sub_outcome[[x]])),]
sub_outcome <-sub_outcome[!is.na(sub_outcome[[x]]),]
sub_outcome[[x]] <- as.numeric(sub_outcome[[x]])
sub_outcome <- unique.data.frame(sub_outcome)
sub_outcome <- outcome[outcome$State == state,]
sub_outcome <-sub_outcome[as.numeric(as.character(sub_outcome[[x]])),]
sub_outcome <-sub_outcome[!is.na(sub_outcome[[x]]),]
sub_outcome[[x]] <- as.numeric(sub_outcome[[x]])
min_death <- min(sub_outcome[[x]])
best("TX", "heart failure")
sub_outcome <- outcome[outcome$State == state,]
sub_outcome
sub_outcome <-sub_outcome[!is.na(sub_outcome[[x]]),]
sub_outcome[[x]] <- as.numeric(sub_outcome[[x]])
sub_outcome <- outcome[outcome$State == state,]
sub_outcome <-sub_outcome[as.numeric(as.character(sub_outcome[[x]])),]
sub_outcome <-sub_outcome[!is.na(sub_outcome[[x]]),]
sub_outcome <- outcome[outcome$State == state,]
sub_outcome <-sub_outcome[as.numeric(as.character(sub_outcome[[x]])),]
sub_outcome[[x]] <- as.numeric(sub_outcome[[x]])
min_death <- min(sub_outcome[[x]])
sub_outcome <-sub_outcome[sub_outcome[[x]] == min_death,]
sub_outcome <- unique.data.frame(sub_outcome)
sub_outcome <- outcome[outcome$State == state,]
sub_outcome <- unique.data.frame(sub_outcome)
sub_outcome <- outcome[outcome$State == state,]
sub_outcome <-sub_outcome[as.numeric(as.character(sub_outcome[[x]])),]
min_death <- min(sub_outcome[[x]])
sub_outcome <- outcome[outcome$State == state,]
sub_outcome <-sub_outcome[as.numeric(as.character(sub_outcome[[x]])),]
sub_outcome[[x]] <- as.numeric(sub_outcome[[x]])
min_death <- min(sub_outcome[[x]])
sub_outcome <-sub_outcome[as.numeric(as.character(sub_outcome[[x]])),]
sub_outcome[[x]] <- as.numeric(sub_outcome[[x]])
sub_outcome <-sub_outcome[!is.na(sub_outcome[[x]]),]
min_death <- min(sub_outcome[[x]])
sub_outcome <-sub_outcome[sub_outcome[[x]] == min_death,]
sub_outcome <- unique.data.frame(sub_outcome)
x <- paste("Hospital.30.Day.Death..Mortality..Rates.from.", outcome_name, sep = '')
sub_outcome <- outcome[outcome$State == state,]
sub_outcome <-sub_outcome[as.numeric(as.character(sub_outcome[[x]])),]
sub_outcome[[x]] <- as.numeric(sub_outcome[[x]])
sub_outcome[[x]] <- as.numeric(sub_outcome[[x]])
na.omit(sub_outcome[[x]])
sub_outcome<- sub_outcome[na.omit(sub_outcome[[x]])]
sub_outcome<- sub_outcome[na.omit(sub_outcome[[x]]),]
View(sub_outcome)
sub_outcome <- outcome[outcome$State == state,]
sub_outcome <-sub_outcome[as.numeric(as.character(sub_outcome[[x]])),]
sub_outcome[[x]] <- as.numeric(sub_outcome[[x]])
sub_outcome<- sub_outcome[na.omit(sub_outcome[[x]]),]
sub_outcome <- outcome[outcome$State == state,]
sub_outcome <-sub_outcome[as.numeric(as.character(sub_outcome[[x]])),]
sub_outcome[[x]] <- as.numeric(sub_outcome[[x]])
sub_outcome <- outcome[outcome$State == state,]
sub_outcome <-sub_outcome[as.numeric(as.character(sub_outcome[[x]])),]
sub_outcome <- outcome[outcome$State == state,]
sub_outcome <-sub_outcome[as.numeric(as.character(sub_outcome[[x]])),]
sub_outcome[sub_outcome[2,x],]
sub_outcome <-sub_outcome[sub_outcome[2,x],]
View(sub_outcome)
sub_outcome <- outcome[outcome$State == state,]
sub_outcome <-sub_outcome[as.numeric(as.character(sub_outcome[[x]])),]
sub_outcome <-sub_outcome[sub_outcome[2,x],]
sub_outcome <- outcome[outcome$State == state,]
sub_outcome <-sub_outcome[sub_outcome[2,x],]
sub_outcome <- outcome[outcome$State == state,]
View(sub_outcome)
sub_outcome <-sub_outcome[as.numeric(as.character(sub_outcome[[x]])),]
sub_outcome <- outcome[outcome$State == state,]
sub_outcome[[x]] <- as.numeric(sub_outcome[[x]])
sub_outcome<- sub_outcome[na.omit(sub_outcome[[x]]),]
sub_outcome <- outcome[outcome$State == state,]
sub_outcome[[x]] <- as.numeric(sub_outcome[[x]])
x <- sub_outcome
z <-x
class(x)
x <- paste("Hospital.30.Day.Death..Mortality..Rates.from.", outcome_name, sep = '')
class(z[[x]])
min(z[[x]])
min_death <- min(sub_outcome[[x]])
sub_outcome <-sub_outcome[sub_outcome[[x]] == min_death,]
sub_outcome <- unique.data.frame(sub_outcome)
if(nrow(sub_outcome) == 1){
as.character(sub_outcome$Hospital.Name[[1]])
}
best <-function(state, outcome_name){
outcome <- read.csv("outcome-of-care-measures.csv")
outcome_types <- c('heart attack', 'heart failure', 'pneumonia')
if(!state %in% state.abb){
stop("invalid state")
}
if(!outcome_name %in% outcome_types){
stop("invalid outcome")
}
foutcome_name <- strsplit(outcome_name, " ")[[1]]
if(length(strsplit(foutcome_name, " ")) > 1){
temp_name <- paste(toupper(substr(foutcome_name[1],1,1)), substr(foutcome_name[[1]],2, nchar(foutcome_name[[1]])), sep ='')
temp_name <- paste(temp_name, paste(toupper(substr(foutcome_name[[2]],1,1)), substr(foutcome_name[[2]],2,nchar(foutcome_name[[2]])), sep = ''), sep = ".")
outcome_name <- temp_name
}else if (length(strsplit(foutcome_name, " ")) == 1){
outcome_name = paste(toupper(substr(foutcome_name[1],1,1)), substr(foutcome_name[[1]],2, nchar(foutcome_name[[1]])), sep ='')
}
x <- paste("Hospital.30.Day.Death..Mortality..Rates.from.", outcome_name, sep = '')
sub_outcome <- outcome[outcome$State == state,]
sub_outcome[[x]] <- as.numeric(sub_outcome[[x]])
#sub_outcome <-sub_outcome[!is.na(sub_outcome[[x]]),]
#sub_outcome<- sub_outcome[na.omit(sub_outcome[[x]]),]
min_death <- min(sub_outcome[[x]])
sub_outcome <-sub_outcome[sub_outcome[[x]] == min_death,]
sub_outcome <- unique.data.frame(sub_outcome)
if(nrow(sub_outcome) == 1){
as.character(sub_outcome$Hospital.Name[[1]])
}
}
best(state, "heart attack")
best(state, "heart failure")
outcome_name <- "heart failure"
x <- paste("Hospital.30.Day.Death..Mortality..Rates.from.", outcome_name, sep = '')
sub_outcome <- outcome[outcome$State == state,]
sub_outcome[[x]] <- as.numeric(sub_outcome[[x]])
sub_outcome <- outcome[outcome$State == state,]
if(!state %in% state.abb){
stop("invalid state")
}
if(!outcome_name %in% outcome_types){
stop("invalid outcome")
}
foutcome_name <- strsplit(outcome_name, " ")[[1]]
if(length(strsplit(foutcome_name, " ")) > 1){
temp_name <- paste(toupper(substr(foutcome_name[1],1,1)), substr(foutcome_name[[1]],2, nchar(foutcome_name[[1]])), sep ='')
temp_name <- paste(temp_name, paste(toupper(substr(foutcome_name[[2]],1,1)), substr(foutcome_name[[2]],2,nchar(foutcome_name[[2]])), sep = ''), sep = ".")
outcome_name <- temp_name
}else if (length(strsplit(foutcome_name, " ")) == 1){
outcome_name = paste(toupper(substr(foutcome_name[1],1,1)), substr(foutcome_name[[1]],2, nchar(foutcome_name[[1]])), sep ='')
}
x <- paste("Hospital.30.Day.Death..Mortality..Rates.from.", outcome_name, sep = '')
sub_outcome <- outcome[outcome$State == state,]
sub_outcome[[x]] <- as.numeric(sub_outcome[[x]])
min_death <- min(sub_outcome[[x]])
sub_outcome <-sub_outcome[sub_outcome[[x]] == min_death,]
x <- paste("Hospital.30.Day.Death..Mortality..Rates.from.", outcome_name, sep = '')
sub_outcome <- outcome[outcome$State == state,]
sub_outcome[[x]] <- as.numeric(sub_outcome[[x]])
min_death <- min(sub_outcome[[x]])
sub_outcome$Hospital.30.Day.Death..Mortality..Rates.from.Heart.Failure[3935]
best("MD, "pneumonia"")
best("MD", "pneumonia"")
best("MD", "pneumonia")
state = "MD"
outcome_name = pneumonia
outcome_name = 'pneumonia'
outcome
outcome
outcome <- read.csv("outcome-of-care-measures.csv")
outcome_types <- c('heart attack', 'heart failure', 'pneumonia')
if(!state %in% state.abb){
stop("invalid state")
}
if(!outcome_name %in% outcome_types){
stop("invalid outcome")
}
foutcome_name <- strsplit(outcome_name, " ")[[1]]
if(length(strsplit(foutcome_name, " ")) > 1){
temp_name <- paste(toupper(substr(foutcome_name[1],1,1)), substr(foutcome_name[[1]],2, nchar(foutcome_name[[1]])), sep ='')
temp_name <- paste(temp_name, paste(toupper(substr(foutcome_name[[2]],1,1)), substr(foutcome_name[[2]],2,nchar(foutcome_name[[2]])), sep = ''), sep = ".")
outcome_name <- temp_name
}else if (length(strsplit(foutcome_name, " ")) == 1){
outcome_name = paste(toupper(substr(foutcome_name[1],1,1)), substr(foutcome_name[[1]],2, nchar(foutcome_name[[1]])), sep ='')
}
x <- paste("Hospital.30.Day.Death..Mortality..Rates.from.", outcome_name, sep = '')
sub_outcome <- outcome[outcome$State == state,]
sub_outcome[[x]] <- as.numeric(sub_outcome[[x]])
min_death <- min(sub_outcome[[x]])
sub_outcome <-sub_outcome[sub_outcome[[x]] == min_death,]
sub_outcome <- unique.data.frame(sub_outcome)
best("BB", "heart attack")
best("NY", "hart attack")
best("MD", "pneumonia")
x <- paste("Hospital.30.Day.Death..Mortality..Rates.from.", outcome_name, sep = '')
sub_outcome <- outcome[outcome$State == state,]
sub_outcome[[x]] <- as.numeric(sub_outcome[[x]])
min_death <- min(sub_outcome[[x]])
x <- paste("Hospital.30.Day.Death..Mortality..Rates.from.", outcome_name, sep = '')
sub_outcome <- outcome[outcome$State == state,]
sub_outcome[[x]] <- as.numeric(sub_outcome[[x]])
outcome <- read.csv("outcome-of-care-measures.csv")
outcome_types <- c('heart attack', 'heart failure', 'pneumonia')
if(!state %in% state.abb){
stop("invalid state")
}
if(!outcome_name %in% outcome_types){
stop("invalid outcome")
}
foutcome_name <- strsplit(outcome_name, " ")[[1]]
if(length(strsplit(foutcome_name, " ")) > 1){
temp_name <- paste(toupper(substr(foutcome_name[1],1,1)), substr(foutcome_name[[1]],2, nchar(foutcome_name[[1]])), sep ='')
temp_name <- paste(temp_name, paste(toupper(substr(foutcome_name[[2]],1,1)), substr(foutcome_name[[2]],2,nchar(foutcome_name[[2]])), sep = ''), sep = ".")
outcome_name <- temp_name
}else if (length(strsplit(foutcome_name, " ")) == 1){
outcome_name = paste(toupper(substr(foutcome_name[1],1,1)), substr(foutcome_name[[1]],2, nchar(foutcome_name[[1]])), sep ='')
}
x <- paste("Hospital.30.Day.Death..Mortality..Rates.from.", outcome_name, sep = '')
sub_outcome <- outcome[outcome$State == state,]
sub_outcome <- outcome[outcome$State == state,]
state = "MI"
sub_outcome <- outcome[outcome$State == state,]
sub_outcome <- outcome[outcome$State == "MD",]
sub_outcome[[x]] <- as.numeric(sub_outcome[[x]])
min_death <- min(sub_outcome[[x]])
sub_outcome <-sub_outcome[sub_outcome[[x]] == min_death,]
sub_outcome <- unique.data.frame(sub_outcome)
if(nrow(sub_outcome) == 1){
as.character(sub_outcome$Hospital.Name[[1]])
}
x <- paste("Hospital.30.Day.Death..Mortality..Rates.from.", outcome_name, sep = '')
sub_outcome <- outcome[outcome$State == state,]
state <- "MD"
sub_outcome <- outcome[outcome$State == state,]
class(sub_outcome[[x]]
)
sub_outcome[[x]] <- as.numeric(sub_outcome[[x]])
class(sub_outcome[[x]])
min_death <- min(sub_outcome[[x]])
sub_outcome <-sub_outcome[sub_outcome[[x]] == min_death,]
sub_outcome <- unique.data.frame(sub_outcome)
sub_outcome <- sub_outcome[order(Hospital.Name)]
sub_outcome <- sub_outcome[order(sub_outcome$Hospital.Name)]
x <- paste("Hospital.30.Day.Death..Mortality..Rates.from.", outcome_name, sep = '')
sub_outcome <- outcome[outcome$State == state,]
sub_outcome[[x]] <- as.numeric(sub_outcome[[x]])
min_death <- min(sub_outcome[[x]])
sub_outcome <-sub_outcome[sub_outcome[[x]] == min_death,]
sub_outcome <- unique.data.frame(sub_outcome)
if(nrow(sub_outcome) == 1){
as.character(sub_outcome$Hospital.Name[[1]])
}else if(nrow(sub_outcome) > 1){
sub_outcome <- sub_outcome[order(sub_outcome$Hospital.Name),]
}
best <-function(state, outcome_name){
outcome <- read.csv("outcome-of-care-measures.csv")
outcome_types <- c('heart attack', 'heart failure', 'pneumonia')
if(!state %in% state.abb){
stop("invalid state")
}
if(!outcome_name %in% outcome_types){
stop("invalid outcome")
}
foutcome_name <- strsplit(outcome_name, " ")[[1]]
if(length(strsplit(foutcome_name, " ")) > 1){
temp_name <- paste(toupper(substr(foutcome_name[1],1,1)), substr(foutcome_name[[1]],2, nchar(foutcome_name[[1]])), sep ='')
temp_name <- paste(temp_name, paste(toupper(substr(foutcome_name[[2]],1,1)), substr(foutcome_name[[2]],2,nchar(foutcome_name[[2]])), sep = ''), sep = ".")
outcome_name <- temp_name
}else if (length(strsplit(foutcome_name, " ")) == 1){
outcome_name = paste(toupper(substr(foutcome_name[1],1,1)), substr(foutcome_name[[1]],2, nchar(foutcome_name[[1]])), sep ='')
}
x <- paste("Hospital.30.Day.Death..Mortality..Rates.from.", outcome_name, sep = '')
sub_outcome <- outcome[outcome$State == state,]
sub_outcome[[x]] <- as.numeric(sub_outcome[[x]])
#sub_outcome <-sub_outcome[!is.na(sub_outcome[[x]]),]
#sub_outcome<- sub_outcome[na.omit(sub_outcome[[x]]),]
min_death <- min(sub_outcome[[x]])
sub_outcome <-sub_outcome[sub_outcome[[x]] == min_death,]
sub_outcome <- unique.data.frame(sub_outcome)
if(nrow(sub_outcome) == 1){
as.character(sub_outcome$Hospital.Name[[1]])
}else if(nrow(sub_outcome) > 1){
sub_outcome <- sub_outcome[order(sub_outcome$Hospital.Name),]
}
}
x <- paste("Hospital.30.Day.Death..Mortality..Rates.from.", outcome_name, sep = '')
sub_outcome <- outcome[outcome$State == state,]
min_death <- min(sub_outcome[[x]])
sub_outcome[[x]] <- as.numeric(sub_outcome[[x]])
sub_outcome <-sub_outcome[sub_outcome[[x]] == min_death,]
sub_outcome <- unique.data.frame(sub_outcome)
if(nrow(sub_outcome) == 1){
as.character(sub_outcome$Hospital.Name[[1]])
}else if(nrow(sub_outcome) > 1){
sub_outcome <- sub_outcome[order(sub_outcome$Hospital.Name),]
as.character(sub_outcome$Hospital.Name[[1]])
}
